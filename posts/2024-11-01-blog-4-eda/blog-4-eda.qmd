---
title: "Blog 4: EDA"
author: "Group 12"
date: "2024-11-01"
date-modified: "2024-11-01"
draft: FALSE
---
```{r}
suppressPackageStartupMessages(library(tidyverse))

data <- readRDS("dataset/cleaned_dataset.rds")

sat_data <- data %>%
  select(SAT_AVG, UGDS_WHITE, UGDS_BLACK, UGDS_HISP, UGDS_ASIAN, UGDS_AIAN, UGDS_NHPI, UGDS_2MOR) %>%
  filter(!is.na(SAT_AVG))

sat_long <- sat_data %>%
  pivot_longer(
    cols = starts_with("UGDS_"),
    names_to = "Race",
    values_to = "Proportion"
  )

sat_long <- sat_long %>%
  mutate(Race = recode(Race,
                       "UGDS_WHITE" = "White",
                       "UGDS_BLACK" = "Black",
                       "UGDS_HISP" = "Hispanic",
                       "UGDS_ASIAN" = "Asian",
                       "UGDS_AIAN" = "American Indian/Alaska Native",
                       "UGDS_NHPI" = "Native Hawaiian/Pacific Islander",
                       "UGDS_2MOR" = "Two or More Races"))

ggplot(sat_long, aes(x = Proportion, y = SAT_AVG)) +

  geom_smooth(aes(color = Race), method = "lm", se = FALSE) +
  labs(title = "SAT Scores by Race Proportion",
       x = "Proportion of Student Body",
       y = "Average SAT Score",
       color = "Race") +
  theme_minimal()
```
